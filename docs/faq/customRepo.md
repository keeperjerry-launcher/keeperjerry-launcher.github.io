# Свое зеркало лаунчера

Начнем с того, что *я очень часто забываю добавить какие-либо дополнительные сборки* для лаунчера.
Обычно на это нет времени, настроения да и мотивации вовсе (на фоне `java 17`).

При этом на официальном сервере есть очень много энтузиастов, которые делают готовые сборки.
Остается вопрос: **как сделать свое зеркало таким, чтобы оно могло автомтически качать сборку?**

Выход есть: Для этого была введена система зеркал! Осталось разобраться в его работе...

## Основные требования

Для начала мы определимся, что из себя представляет зеркало.

::: tip Зеркало - это файловый сервер
Стоит запомнить, что зеркало - это всего лишь файловый сервер, котоырй хранит у себя только статические файлы.
Это значит, что на сервере не должно быть никакого выполняемого кода, по типу `PHP`.
:::

Из-за того, что на сервере нет никаких вычислительных операции, имеет смысл установить такой Web-сервер, как `NGinx`.

Поэтому вы с уверенностью можем сказать, что нам **ТОЧНО** потребуется:
* VDS сервер с `NGinx` (или [OpenServer](https://ospanel.io/) со втроенным `NGinx` для пользователей `Windows`)
* Хотя бы 10 Гб свободного места на диске (зависит от сборок, которые вы собираетесь делать)

*Конечно можно попробовать что-то из `Apache`, но есть ли в этом смысл? Мы ведь отдаем только статические данные...*

## Структура зеркала

Система зеркал настраивается непосрественно в лаунчере. Но далеко не всем пользователем стало понятно, 
как происходит его настройка. 

Рассмотрим ее внимательно. Например:
```bash
mirrors: [
    "https://mirror.keeperjerry.ru/launcher/v1/" <== Ссылка на наше зеркало
];
```

Система зеркал будет обращаться в директории `assets` и `clients`. То есть, по ссылкам:
```bash
https://mirror.keeperjerry.ru/launcher/v1/assets/
https://mirror.keeperjerry.ru/launcher/v1/clients/
```
Так же можно разместить дополнительную директорию `servers`, чтобы пользователи могли скачать оттуда ваши сборки серверов.
В отличии `assets` и `clients` папка `servers` нужна чисто символически для ваших пользователей (по желанию).

::: tip На ассеты можно забить
На `assets` можно не обращать внимание, потому что основные `asset`'ы уже лежат на моем сайте и по факту почти не меняются.
:::

Структура файлов такова, что любой ресурс (`assets`/`clients`) содержится в архиве с расширением `.zip`. 
Это не требует ассинхронной скачки и позволяет более быстро скачать необходимый пкает.

А вот с `clients` уже немного по сложнее. Здесь нужно настроить свою структуру:

* Во первых, со сборкой версии `<version>.zip` дожен присутствовать файл `<version>.cfg` с готовыми настройками для вашей сборки (например, аргументы `java`, изменненный `main-class`). Пример:
```bash
1.12.2.zip <== Архив с клиентом
1.12.2.cfg <== Файл с настройками клиента (profiles)
```

* Во-вторых, можно делать несколько сборок одной версии и с готовым набором модов. Например:
```bash
1.12.2-forge.zip <== Архив с клиентом
1.12.2-forge.cfg <== Файл с настройками клиента (profiles)
```

::: tip Сборки могут быть с любым названием
На самом деле, лаунчер воспринимает параметры как аргументы после знака `- (тире)`. Так что вместо `forge` можно написать какую угодно сборку. Очень полезно для готовых сборок.
:::