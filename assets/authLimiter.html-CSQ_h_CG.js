import{_ as c,c as o,b as t,e as r,w as e,r as d,o as u,a as n,d as a}from"./app-C0i2AJz9.js";const m={};function v(b,s){const p=d("CodeTabs");return u(),o("div",null,[s[4]||(s[4]=t(`<h1 id="лимитер-и-ограничения-по-ip" tabindex="-1"><a class="header-anchor" href="#лимитер-и-ограничения-по-ip"><span>Лимитер и ограничения по IP</span></a></h1><p>Данная функция частично разгружает сервер авторизации, защищая его от подбора паролей. Функционал был переписан под управление IP адресами. Пока что он работает только после перезагрузки LaunchServer&#39;a.</p><div class="hint-container tip"><p class="hint-container-title">Проблемы на &quot;домашнем&quot; сервере с роутерами</p><p>У сервиса есть небольшие проблемы с проксированием: <code>LaunchServer</code> не умеет определять IP за шлюзом/прокси. Это свяазно со стандартной сокетной реализацией через Java. В ближайшее время это планируется решить через библиотеку <strong>Netty</strong> (не точно, т.к. это глобальное изменение архитектуры).</p><p>Так что не удивляйтесь, если вы видите подключение от <code>192.168.0.1</code> и т.д.</p></div><h2 id="настроика-лимитера" tabindex="-1"><a class="header-anchor" href="#настроика-лимитера"><span>Настройка лимитера</span></a></h2><p>Рассмотрим пример конфигурации лимитера:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># Сервис фильтрации запросов и лимиты подключения</span></span>
<span class="line">authLimit: <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment"># Включение системы лимита</span></span>
<span class="line">authLimitConfig: <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment"># Основные настройки</span></span>
<span class="line">    authRateLimit: <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment"># Кол-во попыток авторизации</span></span>
<span class="line">    authRateLimitMilis: <span class="token number">8000</span><span class="token punctuation">;</span> <span class="token comment"># Пауза после попыток авторизации 8 сек.</span></span>
<span class="line">    useAllowIp: <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment"># Включить белый список</span></span>
<span class="line">    useBlockIp: <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment"># Включить черный список</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># Сообщения клиентам</span></span>
<span class="line">    authRejectString: <span class="token string">&quot;Превышен лимит авторизаций, подождите некоторое время!&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    authNotWhitelistString: <span class="token string">&quot;Вашего IP нет в белом списке!&quot;</span><span class="token punctuation">;</span> <span class="token comment"># Показывает только при включенном onlyAllowIp</span></span>
<span class="line">    authBannedString: <span class="token string">&quot;Ваш IP заблокирован!&quot;</span><span class="token punctuation">;</span> <span class="token comment"># Сообщение о блокировке (работает при blockOnConnect: false)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment"># Дополнительные настройки</span></span>
<span class="line">    blockOnConnect: <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment"># Отключает любые подключения к LaunchServer заблокированным IP</span></span>
<span class="line">    onlyAllowIp: <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment"># Разрешить подключение только доверенным IP адресам</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Параметр <code>authLimit</code> отвечает за работу всей системы. Если отключить данный параметр - дальнейшая настройка окажется бесполезной.</p>`,7)),r(p,{data:[{id:"Включен"},{id:"Отключен"}]},{title0:e(({value:l,isActive:i})=>s[0]||(s[0]=[a("Включен",-1)])),title1:e(({value:l,isActive:i})=>s[1]||(s[1]=[a("Отключен",-1)])),tab0:e(({value:l,isActive:i})=>s[2]||(s[2]=[n("div",{class:"language-bash line-numbers-mode","data-highlighter":"prismjs","data-ext":"sh"},[n("pre",null,[n("code",{class:"language-bash"},[n("span",{class:"line"},[a("authLimit: "),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),a(),n("span",{class:"token comment"},"# Включение системы лимита")]),a(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"})])],-1)])),tab1:e(({value:l,isActive:i})=>s[3]||(s[3]=[n("div",{class:"language-bash line-numbers-mode","data-highlighter":"prismjs","data-ext":"sh"},[n("pre",null,[n("code",{class:"language-bash"},[n("span",{class:"line"},[a("authLimit: "),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),a(),n("span",{class:"token comment"},"# Включение системы лимита")]),a(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"})])],-1)])),_:1}),s[5]||(s[5]=t(`<h2 id="фаил-с-адресами" tabindex="-1"><a class="header-anchor" href="#фаил-с-адресами"><span>Файл с адресами</span></a></h2><p>В лаунчере присутствует файл <code>ListIpConnection.json</code>, который хранит в себе белый список (allowIp) и черный список (blockIp). Выглядит он так:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;allowIp&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;172.18.0.1&quot;</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;blockIp&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&quot;1.2.3.4&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;4.3.2.1&quot;</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Белый список (allowIp) предназначен для игровых серверов, чтобы не попадать под проверку (authRateLimit) и не ждать окончания лимита. Черный список (blockIp) предназначен для блокировки IP нежелательных пользователей.</p><h2 id="команды" tabindex="-1"><a class="header-anchor" href="#команды"><span>Команды</span></a></h2><p>В новой системе динамической подгрузки были добавлены команды для операций с IP адресами:</p><div class="language-markdown line-numbers-mode" data-highlighter="prismjs" data-ext="md"><pre><code class="language-markdown"><span class="line"><span class="token title important"><span class="token punctuation">#</span> Белый список</span></span>
<span class="line">allowip add 127.0.0.1 # Добавить IP в Белый список</span>
<span class="line">allowip del 127.0.0.1 # Убрать IP из Белого списка</span>
<span class="line"></span>
<span class="line"><span class="token title important"><span class="token punctuation">#</span> Черный список</span></span>
<span class="line">blockip add 127.0.0.1 # Добавить IP в Черный список</span>
<span class="line">blockip del 127.0.0.1 # Убрать IP из Черного списка</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Включи свои мозги</p><p><strong>НЕ НАДО РУКАМИ СТАВИТЬ IP АДРЕСА БЕЗ ПЕРЕЗАГРУЗКИ В <code>ListIpConnection.json</code> И ГОВОРИТЬ МНЕ, ЧТО ОНО НЕ РАБОТАЕТ! Уже были такие сверхразумы. Поверь.</strong></p></div><h2 id="нюансы" tabindex="-1"><a class="header-anchor" href="#нюансы"><span>Нюансы</span></a></h2><p>Параметр <code>blockOnConnect</code> позволяет управлять подключением с заблокированными IP адресами: если установлено значение <code>false</code> - клиенты увидят сообщение о том, что их IP забанен, если установлено значение <code>true</code> - заблокированные адреса не смогут вовсе подключится к вашему <code>LaunchServer</code>, просто отклоняя любое соединение с указанными IP.</p><div class="hint-container tip"><p class="hint-container-title">Для чего это вообще нужно?</p><p><code>blockOnConnect</code> - очень удобная функция, которая позволяет скрыть существование вашего лаунчера в сети от незнакомых адресов. Если ваш лаунчер является &quot;приватным&quot; - незнакомцы вовосе не смогут понять работает ли ваш сервер или нет. Особенно актуально против ботов сайта <a href="https://www.shodan.io/" target="_blank" rel="noopener noreferrer">shodan.io</a></p></div><p>Параметр <code>onlyAllowIp</code> позволяет настроить подключение только для IP, которые указанны в белом списке <code>allowIp</code>, так что не забудьте включить его!</p>`,12))])}const k=c(m,[["render",v]]),g=JSON.parse('{"path":"/config/authLimiter.html","title":"Лимитер и ограничения по IP","lang":"ru-RU","frontmatter":{},"git":{"updatedTime":1754382747000,"contributors":[{"name":"KeeperJerry","username":"KeeperJerry","email":"keeperjerry@yandex.ru","commits":1,"url":"https://github.com/KeeperJerry"}],"changelog":[{"hash":"9b7a3a8d47b522a18f9c479317787d38d4779f75","time":1754382747000,"email":"keeperjerry@yandex.ru","author":"KeeperJerry","message":"init"}]},"filePathRelative":"config/authLimiter.md"}');export{k as comp,g as data};
